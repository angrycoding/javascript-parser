<!DOCTYPE HTML>
<html>
	<head>
		<title>krang</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<script type="text/javascript" src="beautify.js"></script>
		<script type="text/javascript" src="krang.js"></script>

		<script id="script" type="text/plain">


			var x = 10;

			while (x--) {
				alert(x);
			}


		</script>

		<script type="text/javascript">

			// var x = /

			function dump(value) {
				console.info(
					js_beautify(
						JSON.stringify(
							value,
							function(x, y) {
								if (typeof y === 'function')
									return y.toString()
								return y
							}
						)
					)
				);
			}


			var script = document.getElementById('script').innerHTML;

			krang({cache: false, debug: false}).require([
				'src/parser/Parser',
				'src/Generator',
				'src/evaluator/Evaluator'
			], function(Parser, Generator, Evaluator) {

				var AST = Parser(script);
				dump(AST);
				// console.info(Generator(AST));

				Evaluator(AST, function(result) {
					console.info('DONE EVALUATION', result);
				});

			});

		</script>


	</head>
	<body>

	</body>
</html>